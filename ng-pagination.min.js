ang.directive("ngPagination",function(t,e){return{link:function(e,a,i){var r=this,s=i.scope;this.extract=function(){e.$watch(s,function(t,a){if(t){if(r.controller=i.controller?i.controller:!1,r.dataScope=i.scope?e[i.scope]:!1,r.pageLimit=i.pageLimit?parseInt(i.pageLimit):10,r.originalData=r.dataScope,r.pagerButtons=i.pagerButtons?parseInt(i.pagerButtons):3,!r.controller)throw"[data-controller] is missing.";if(!r.dataScope)throw"[data-scope] is missing.";r.globals(),r.prepare()}})},this.globals=function(){e.PagesCount=Math.ceil(this.dataScope.length/this.pageLimit),e.FallBackData=this.originalData,e.CurrentPage=t.search().page?t.search().page:1,e.NextPage=parseInt(e.CurrentPage<e.PagesCount?parseInt(e.CurrentPage)+1:e.CurrentPage),e.PrevPage=1==e.CurrentPage?1:e.CurrentPage-1,e.FirstPage=1,e.LastPage=parseInt(e.PagesCount),console.log(e)},this.prepare=function(){this.iteration=t.search().page?t.search().page*this.pageLimit-this.pageLimit:0,this.pages=[],e.PagedData=[];for(var a=0;a<Math.ceil(this.dataScope.length/this.pageLimit);a++)this.pages.push(a+1);for(var a=this.iteration;a<this.pageLimit+this.iteration&&a!==this.originalData.length;a++)e.PagedData.push(e.FallBackData[a]);this.pager()},this.pager=function(t,a){var i=parseInt(this.pagerButtons)/2;if(i=Math.round(i),e.Pages=[],this.pages.length>this.pagerButtons&&e.CurrentPage<=i)for(var r=0;r<this.pagerButtons;r++)e.Pages.push(r+1);else if(e.CurrentPage>i){for(var r=e.CurrentPage;r>parseInt(e.CurrentPage)-i;r--)e.Pages.unshift(r);for(var r=+e.CurrentPage+1;r<+e.CurrentPage+i;r++)if(e.CurrentPage<this.pages.slice(-1)[0]&&r<=this.pages.slice(-1)[0])e.Pages.push(r);else if(e.Pages.length<this.pagerButtons)for(var s=e.Pages.length;s<this.pagerButtons;s++)e.Pages.unshift(e.Pages[0]-1)}if(e.Pages.length<1&&this.pages.length>0)for(var r=0;r<this.pages.length;r++)e.Pages.push(r+1);this.active()},this.active=function(){$(document).ready(function(){var t="[data-page="+e.CurrentPage+"]",a=$(t);a.not(".nextpage, .prevpage").parent().addClass("active").siblings().removeClass("active")}),this.errorHandler()},this.errorHandler=function(){function t(t){return t%2==0}t(i.pagerButtons)&&console.warn("An even number ("+i.pagerButtons+") isset in [data-pager-buttons], the .active page will not remain in the middle! Use Eg: 3, 7, 9 .. in order to keep it in the middle.")},this.initialize=function(){this.extract()},this.initialize(),e.DoPaging=function(e){var a=e.target,a=$(a).closest("button")[0],i=a.dataset.page;t.search("page",i),r.initialize()}},scope:!0,restrict:"AE",controller:"@",name:"controller"}});
